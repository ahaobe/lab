# 音乐家人生轨迹和故事自动提取详细教程

----

## 一、实验准备和内容

### 1. 实验准备
- 下载和安装Java jdk（1.6或者以上）；
- 熟悉IDEA或者eclipse等开发环境；
- 理解实体提取相关技术。

### 2. 实验内容

音乐家人生轨迹和故事自动提取：   
给定某个人物的生平介绍（比如贝多芬）的文档，自动提取实体，绘制该人物的生平和故事。  
要求：  
（1）实体的提取；（何人、何时、何地、发生了何事）  
（2）构建前端和网站页面，对人物和故事的时间线的展示

## 二、实验过程

本次实验使用的是之前的实验使用过的SSM整合方式以及RESTful API的设计，该音乐家生平提取系统是基于Java的Web项目。

### 1. 音乐家生平文本的处理
#### 1.1 数据预处理
接收从前端传回的记录音乐家生平的文件，使用`InputStream`和`BufferReader`读取文件内容。因为有的文件是繁体字，所以先进行“繁转简”处理。  
![](pic/1.1.png)

#### 1.2 根据时间切分事件
利用split函数和正则表达式，以文件中的时间年份为分隔符，对文件进行分割，用list来存储分割后的事件。    
![](pic/1.2.png)

#### 1.3 提取事件
对分割后的事件进行遍历，对每个事件字符串都调用事件提取函数`extractSummary`。
![](pic/1.3.png)

#### 1.4 将提取的事件传回前端
将事件发生时间和事件组装，以json格式传回前端显示。   
![](pic/1.4.png)

#### 1.5 事件提取函数 extractSummary
它会去调用另外的接口getTopSentenceList（自动摘要函数）
![](pic/1.5.png)

会从按时间分好的文字段落里提取关键字组成事件并返回
![](pic/1.5.1png)

其中会调用分句函数，将文档分为一个个的句子
![](pic/1.5.2png)

还有提取关键字再整理成文档函数，
![](pic/1.5.3png)

### 2. 构建Web页面

首先依旧是在static包下再分js、css等文件夹：

![1](pic/1.png)

创建musicianLife.html：

![2](pic/2.png)

在musicianLife.html中，选择音乐家生平简介的文本文件以上传：

![3](pic/3.png)

在trans.js中，使用AJAX进行前后端交互，将选中的文件传至后端，收到后端返回的处理好的数据后以时间线的形式展示在页面上：

![4](pic/4.png)

### 3. 运行





















至此，音乐家人生轨迹和故事自动提取实验已顺利完成！

> 作者：邱学良、谈雪、周雨欣
>
> 时间：2019年06月22日
>
> 参考资料：
>
> ① https://github.com/hankcs/HanLP

